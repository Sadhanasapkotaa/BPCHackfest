<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Parking Slot Booking</title>
    <style>
      body {
        font-family: Arial, sans-serif;
      }

      .parking-lot {
        display: flex;
      }

      .slot {
        width: 120px;
        height: 120px;
        margin: 10px;
        border: 2px solid #000;
        position: relative;
        display: flex;
        flex-wrap: wrap;
      }

      .available {
        width: 50%;
        height: 50%;
        background-color: green;
        opacity: 0.3;
      }

      .slot-info {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      /* modal code  */
      /* Modal Styles */
      .modal,
      .warningModal,
      .bikeSuccessModal,
      .carSuccessModal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
      }

      .modal-content {
        background-color: #fefefe;
        margin: 15% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
        text-align: center;
      }

      /* Button Styles */
      button {
        margin: 10px;
        padding: 10px 20px;
        border: none;
        cursor: pointer;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <div class="parking-lot">
      <div class="slot" id="slot1">
        <div class="available"></div>
        <div class="available"></div>
        <div class="available"></div>
        <div class="available"></div>
        <div class="slot-info">Slot 1</div>
      </div>
      <div class="slot" id="slot2">
        <div class="available"></div>
        <div class="available"></div>
        <div class="available"></div>
        <div class="available"></div>
        <div class="slot-info">Slot 2</div>
      </div>
      <div class="slot" id="slot3">
        <div class="available"></div>
        <div class="available"></div>
        <div class="available"></div>
        <div class="available"></div>
        <div class="slot-info">Slot 3</div>
      </div>
      <div class="slot" id="slot4">
        <div class="available"></div>
        <div class="available"></div>
        <div class="available"></div>
        <div class="available"></div>
        <div class="slot-info">Slot 4</div>
      </div>
    </div>

    <!-- Modal HTML (same as before) -->
    <div id="myModal" class="modal">
      <div class="modal-content">
        <p>Do you want to book this slot for a car or a bike?</p>
        <button id="carBtn">Car</button>
        <button id="bikeBtn">Bike</button>
      </div>
    </div>
    <div id="warningModal" class="warningModal">
      <div class="modal-content">
        <p>
          This slot has been partially booked for bikes. Only bikes can be
          parked here.
        </p>
      </div>
    </div>

    <div id="bikeSuccessModal" class="bikeSuccessModal">
      <div class="modal-content">
        <p>Bike Slot Booked Successfully!</p>
      </div>
    </div>

    <div id="carSuccessModal" class="carSuccessModal">
      <div class="modal-content">
        <p>Car Slot Booked Successfully!</p>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const modal = document.getElementById("myModal");
        const slots = document.querySelectorAll(".slot");

        slots.forEach((slot) => {
          slot.addEventListener("click", function () {
            modal.style.display = "block";
            setTimeout(function () {
              modal.style.display = "none";
            }, 1500);

            const carBtn = document.getElementById("carBtn");
            const bikeBtn = document.getElementById("bikeBtn");

            carBtn.addEventListener("click", function () {
              modal.style.display = "none";
              setTimeout(function () {
                modal.style.display = "none";
              }, 1500);

              bookVehicle("car", slot);
            });

            bikeBtn.addEventListener("click", function () {
              modal.style.display = "none";
              bookVehicle("bike", slot);
            });
          });
        });

        function bookVehicle(vehicleType, slot) {
          if (!slot.classList.contains("booked")) {
            if (vehicleType === "car") {
              const bookedParts = slot.querySelectorAll(".booked").length;
              if (bookedParts === 0) {
                slot.querySelectorAll(".available").forEach((part) => {
                  part.style.backgroundColor = "red";
                  part.classList.add("booked");
                });
                slot.classList.add("booked");
                carSuccessModal.style.display = "block";
                setTimeout(function () {
                  carSuccessModal.style.display = "none";
                }, 1500);
              } else {
                warningModal.style.display = "block";
                setTimeout(function () {
                  warningModal.style.display = "none";
                }, 1500);
              }
            } else if (vehicleType === "bike") {
              const availablePart = slot.querySelector(
                ".available:not(.booked)"
              );

              if (availablePart) {
                availablePart.style.backgroundColor = "blue";
                availablePart.classList.add("booked");

                const bookedParts = slot.querySelectorAll(".booked").length;
                if (bookedParts === 4) {
                  slot.classList.add("booked");
                }
                bikeSuccessModal.style.display = "block";
                setTimeout(function () {
                  bikeSuccessModal.style.display = "none";
                }, 1500);
              } else {
                warningModal.style.display = "block";
                setTimeout(function () {
                  warningModal.style.display = "none";
                }, 1500);
              }
            }
          } else {
            warningModal.style.display = "block";
            setTimeout(function () {
              warningModal.style.display = "none";
            }, 1500);
          }
        }

        function resetCarSlot(slot) {
          slot.querySelectorAll(".booked").forEach((part) => {
            part.style.backgroundColor = "green";
            part.classList.remove("booked");
          });
          slot.classList.remove("booked");
        }
      });
    </script>
  </body>
</html>

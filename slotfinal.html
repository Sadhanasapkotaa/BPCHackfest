<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!--========== BOX ICONS ==========-->
    <link
      href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css"
      rel="stylesheet"
    />

    <!--========== CSS ==========-->
    <link rel="stylesheet" href="assets/css/styles.css" />

    <title>OpenPark - No tickets</title>

    <style>
      body {
        font-family: Arial, sans-serif;
      }

      .parking-lot {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        width: 70%;
        height: 500px;
        align-items: center;
      }

      .slot {
        width: 120px;
        height: 120px;
        margin: 10px;
        border: 1px solid #616161;
        border-radius: 18px;
        overflow: hidden;
        position: relative;
        display: flex;
        flex-wrap: wrap;
      }

      .available {
        width: 50%;
        height: 50%;
        background-color: #fdc8b5;
      }

      .slot-info {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      /* modal code  */
      /* Modal Styles */
      .modal,
      .warningModal,
      .bikeSuccessModal,
      .carSuccessModal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
      }

      .modal-content {
        background-color: #fefefe;
        margin: 15% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
        text-align: center;
      }

      /* Button Styles */
      button {
        margin: 10px;
        padding: 10px 20px;
        border: none;
        cursor: pointer;
        border-radius: 5px;
      }
      .main {
        margin-top: 5rem;
        display: flex;
        align-items: center;
        justify-content: center;
      }
    </style>
  </head>
  <body>
    <!--========== SCROLL TOP ==========-->
    <a href="#" class="scrolltop" id="scroll-top">
      <i class="bx bx-up-arrow-alt scrolltop__icon"></i>
    </a>

    <!--========== HEADER ==========-->
    <header class="l-header" id="header">
      <nav class="nav bd-container">
        <a href="#" class="nav__logo">OPEN<b>PARK</b></a>

        <div class="nav__menu" id="nav-menu">
          <ul class="nav__list">
            <li class="nav__item">
              <a href="#home" class="nav__link active-link">Home</a>
            </li>
            <li class="nav__item">
              <a href="#share" class="nav__link">Owner</a>
            </li>
            <li class="nav__item">
              <a href="#decoration" class="nav__link">Features</a>
            </li>
            <li class="nav__item">
              <a href="#accessory" class="nav__link">Pricing</a>
            </li>

            <li class="nav__item">
              <a href="userLoginSignup.html" class="nav-button">Login</a>
              <!-- <i class="bx bx-toggle-left change-theme" id="theme-button"></i> -->
            </li>
          </ul>
        </div>

        <div class="nav__toggle" id="nav-toggle">
          <i class="bx bx-grid-alt"></i>
        </div>
      </nav>
    </header>

    <main class="main">
      <div class="parking-lot"></div>

      <!-- Modal HTML (same as before) -->
      <div id="myModal" class="modal">
        <div class="modal-content">
          <p>Do you want to book this slot for a car or a bike?</p>
          <button id="carBtn">Car</button>
          <button id="bikeBtn">Bike</button>
        </div>
      </div>
      <div id="warningModal" class="warningModal">
        <div class="modal-content">
          <p>
            This slot has been partially booked for bikes. Only bikes can be
            parked here.
          </p>
        </div>
      </div>

      <div id="bikeSuccessModal" class="bikeSuccessModal">
        <div class="modal-content">
          <p>Bike Slot Booked Successfully!</p>
        </div>
      </div>

      <div id="carSuccessModal" class="carSuccessModal">
        <div class="modal-content">
          <p>Car Slot Booked Successfully!</p>
        </div>
      </div>

      <script>
        const id = 10;
        const parkingLot = document.querySelector(".parking-lot");

        for (let i = 1; i <= id; i++) {
          const slot = document.createElement("div");
          slot.classList.add("slot");
          slot.id = `slot${i}`;

          for (let j = 0; j < 4; j++) {
            const available = document.createElement("div");
            available.classList.add("available");
            slot.appendChild(available);
          }

          const slotInfo = document.createElement("div");
          slotInfo.classList.add("slot-info");
          slotInfo.textContent = `Slot ${i}`;
          slot.appendChild(slotInfo);

          parkingLot.appendChild(slot);
        }

        document.addEventListener("DOMContentLoaded", function () {
          const modal = document.getElementById("myModal");
          const slots = document.querySelectorAll(".slot");

          slots.forEach((slot) => {
            slot.addEventListener("click", function () {
              modal.style.display = "block";
              setTimeout(function () {
                modal.style.display = "none";
              }, 1500);

              const carBtn = document.getElementById("carBtn");
              const bikeBtn = document.getElementById("bikeBtn");

              carBtn.addEventListener("click", function () {
                modal.style.display = "none";
                setTimeout(function () {
                  modal.style.display = "none";
                }, 1500);

                bookVehicle("car", slot);
              });

              bikeBtn.addEventListener("click", function () {
                modal.style.display = "none";
                bookVehicle("bike", slot);
              });
            });
          });

          function bookVehicle(vehicleType, slot) {
            if (!slot.classList.contains("booked")) {
              if (vehicleType === "car") {
                const bookedParts = slot.querySelectorAll(".booked").length;
                if (bookedParts === 0) {
                  slot.querySelectorAll(".available").forEach((part) => {
                    part.style.backgroundColor = "#999999";
                    part.classList.add("booked");
                  });
                  slot.classList.add("booked");
                  carSuccessModal.style.display = "block";
                  setTimeout(function () {
                    carSuccessModal.style.display = "none";
                  }, 1500);
                } else {
                  warningModal.style.display = "block";
                  setTimeout(function () {
                    warningModal.style.display = "none";
                  }, 1500);
                }
              } else if (vehicleType === "bike") {
                const availablePart = slot.querySelector(
                  ".available:not(.booked)"
                );

                if (availablePart) {
                  availablePart.style.backgroundColor = "#999999";
                  availablePart.classList.add("booked");

                  const bookedParts = slot.querySelectorAll(".booked").length;
                  if (bookedParts === 4) {
                    slot.classList.add("booked");
                  }
                  bikeSuccessModal.style.display = "block";
                  setTimeout(function () {
                    bikeSuccessModal.style.display = "none";
                  }, 1500);
                } else {
                  warningModal.style.display = "block";
                  setTimeout(function () {
                    warningModal.style.display = "none";
                  }, 1500);
                }
              }
            } else {
              warningModal.style.display = "block";
              setTimeout(function () {
                warningModal.style.display = "none";
              }, 1500);
            }
          }

          function resetCarSlot(slot) {
            slot.querySelectorAll(".booked").forEach((part) => {
              part.style.backgroundColor = "green";
              part.classList.remove("booked");
            });
            slot.classList.remove("booked");
          }
        });
      </script>
    </main>

    <!--========== FOOTER ==========-->
    <footer class="footer section">
      <div class="footer__container bd-container bd-grid">
        <div class="footer__content">
          <h3 class="footer__title">
            <a href="#" class="footer__logo">OPEN<b>PARK</b></a>
          </h3>
          <p class="footer__description">
            Looking for<br />
            parking space?
          </p>
        </div>

        <div class="footer__content">
          <h3 class="footer__title">Our Services</h3>
          <ul>
            <li><a href="#" class="footer__link">Pricing </a></li>
            <li><a href="#" class="footer__link">Discounts</a></li>
            <li><a href="#" class="footer__link">FAQs</a></li>
          </ul>
        </div>

        <div class="footer__content">
          <h3 class="footer__title">Our Company</h3>
          <ul>
            <li><a href="#" class="footer__link">Blog</a></li>
            <li><a href="#" class="footer__link">About us</a></li>
            <li><a href="#" class="footer__link">Our mision</a></li>
          </ul>
        </div>

        <div class="footer__content">
          <h3 class="footer__title">Social</h3>
          <a href="#" class="footer__social"
            ><i class="bx bxl-facebook-circle"></i
          ></a>
          <a href="#" class="footer__social"><i class="bx bxl-twitter"></i></a>
          <a href="#" class="footer__social"
            ><i class="bx bxl-instagram-alt"></i
          ></a>
        </div>
      </div>

      <p class="footer__copy">
        &#169; 2024 Team Everest. BPC Hackathon. All right reserved
      </p>
    </footer>

    <!--========== SCROLL REVEAL ==========-->
    <script src="https://unpkg.com/scrollreveal"></script>

    <!--========== MAIN JS ==========-->
    
  </body>
</html>
